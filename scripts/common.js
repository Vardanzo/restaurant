"use strict";var _document$querySelect;function _createForOfIteratorHelper(e,t){var n,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return a=e.done,e},e:function(e){c=!0,r=e},f:function(){try{a||null==o.return||o.return()}finally{if(c)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var NAVIGATION_HEIGHT=78,BORDER_WIDTH=1,SCROLL_STEP=100,MENU_LIST_START_Y=583,NAV_PADDING_SUM=160;function createScrollBackButton(){var e=document.createElement("button");return e.classList.add("scroll-back-button"),e.innerHTML='\n            <svg width="24" height="14" viewBox="0 0 24 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n               <path d="M13.0607 0.939577C12.4749 0.353795 11.5252 0.353801 10.9394 0.939592L1.3935 10.4856C0.807718 11.0714 0.807724 12.0211 1.39351 12.6069C1.9793 13.1927 2.92905 13.1927 3.51483 12.6069L12.0001 4.12156L20.4854 12.6068C21.0712 13.1926 22.0209 13.1926 22.6067 12.6068C23.1925 12.021 23.1925 11.0712 22.6067 10.4855L13.0607 0.939577ZM13.5001 4.0001L13.5 2.00023L10.5 2.00025L10.5001 4.00012L13.5001 4.0001Z" fill="#222021"/>\n            </svg>\n            ',e.addEventListener("click",function e(){0<scrollY&&(window.scrollBy(0,-SCROLL_STEP),setTimeout(e,20))}),e}var scrollBackButton=createScrollBackButton(),navLinks=(document.querySelector("body").append(scrollBackButton),document.querySelectorAll(".restaurant-menu__link"));function getPosition(e){return document.documentElement.scrollTop+e.getBoundingClientRect().y+BORDER_WIDTH}function handleClickNavMenuItem(e){scrollToTarget(e.target.getAttribute("to"))}function scrollToTarget(e){e=getPosition(document.getElementById(e));window.scrollTo({top:e-NAVIGATION_HEIGHT,behavior:"smooth"})}function changeToMainPage(e){history.pushState({targetId:e.target.getAttribute("to")},null,"/"),history.go(0)}var _step,sections=document.querySelectorAll(".menu-list__item"),_iterator=_createForOfIteratorHelper(navLinks);try{for(_iterator.s();!(_step=_iterator.n()).done;){var navLink=_step.value;sections.length?navLink.addEventListener("click",handleClickNavMenuItem):navLink.addEventListener("click",changeToMainPage)}}catch(e){_iterator.e(e)}finally{_iterator.f()}function changeNavActiveItem(){if(sections.length)for(var e=0;e<sections.length;e++){var t=sections[e].getBoundingClientRect(),n=t.y,t=t.height,o=document.querySelector('[to="'.concat(sections[e].id,'"]')).parentNode;n<=NAVIGATION_HEIGHT&&NAVIGATION_HEIGHT-t<n?o.classList.add("restaurant-menu__item_active"):o.classList.remove("restaurant-menu__item_active")}}function setMenuListPadding(e){var t=document.querySelector(".menu-list");t&&(t.style.paddingTop=e)}function checkHistoryState(){var e=null==(e=history.state)?void 0:e.targetId;e&&scrollToTarget(e)}function closingModal(){var e,t=document.querySelector(".modal");null!=(e=t.querySelector(".modal__basket-img"))&&e.remove(),t.querySelector(".modal__caption").innerHTML="",t.querySelector(".modal__description").innerHTML="",t.classList.add("modal_hide"),document.querySelector("body").style.overflow="initial"}window.addEventListener("scroll",function(){var e;"/ordering.html"!==location.pathname?(changeNavActiveItem(),e=document.querySelector(".header__bottom-section"),scrollY>=MENU_LIST_START_Y?(e.classList.add("header__bottom-section_fixed"),e.style.width=document.querySelector(".wrapper").clientWidth-NAV_PADDING_SUM+"px",setMenuListPadding("".concat(NAVIGATION_HEIGHT,"px")),scrollBackButton.style.opacity="1"):(e.classList.remove("header__bottom-section_fixed"),e.style.width="auto",setMenuListPadding(scrollBackButton.style.opacity="0"))):scrollY>=MENU_LIST_START_Y?scrollBackButton.style.opacity="1":scrollBackButton.style.opacity="0"}),null!=(_document$querySelect=document.querySelector(".back-button"))&&_document$querySelect.addEventListener("click",function(){history.back()}),checkHistoryState(),document.querySelector(".header__link").addEventListener("click",function(e){e.preventDefault();var t,e=document.querySelector(".modal");window.basketAPI.getBasket().length?window.open("/basket.html","_self"):(e.querySelector(".modal__caption").innerHTML="Корзина пуста",(t=document.createElement("img")).setAttribute("src","assets/icons/basket-empty.svg"),t.style.marginBottom="14px",t.classList.add("modal__basket-img"),e.querySelector(".modal__content").prepend(t),e.classList.remove("modal_hide"),document.querySelector("body").style.overflow="hidden")}),document.querySelector(".modal__back").addEventListener("click",closingModal),document.querySelector(".modal__exit-button").addEventListener("click",closingModal),document.querySelector(".modal__back-to-menu").addEventListener("click",function(e){"/"===location.pathname?closingModal():window.open("/","_self")});