"use strict";var DELIVERY_TYPE={delivery:"доставка",pickup:"самовывоз"},PAYMENT_TYPE={online:"онлайн",expeditor:"картой курьеру",cash:"наличными"},CALLBACK={yes:"да",no:"нет"},radios=(document.querySelector("#amountItemsInBucket").innerText=JSON.parse(localStorage.getItem("basket")).length,document.querySelectorAll(".switch")),removeButton=(radios.forEach(function(t){var n=t.querySelector(".switch__block");t.addEventListener("click",function(e){e.target.closest(".switch__classic-button")&&(n.style.left=e.target.getBoundingClientRect().left-t.getBoundingClientRect().left+"px")})}),document.querySelector('[dataId="delivery"]').addEventListener("click",function(e){e.target.closest(".switch__classic-button")&&("delivery"===e.target.value?(document.querySelector(".delivery").classList.remove("display_hide"),document.querySelector(".pickup").classList.add("display_hide")):(document.querySelector(".delivery").classList.add("display_hide"),document.querySelector(".pickup").classList.remove("display_hide")))}),document.querySelector('[dataId="deliveryTime"]').addEventListener("click",function(e){e.target.closest(".switch__classic-button")&&("inTime"===e.target.value?document.querySelector(".date-time").classList.remove("display_hide"):document.querySelector(".date-time").classList.add("display_hide"))}),document.querySelector(".person-counter__remove-button")),personCounter=document.querySelector(".person-counter__number"),count=1,addButton=(removeButton.addEventListener("click",function(e){1===count?removeButton.setAttribute("disabled","true"):(--count,personCounter.innerHTML=count)}),document.querySelector(".person-counter__add-button"));function closeDropDown(e,t){e.classList.remove("drop-down__list_active"),t.classList.remove("drop-down__button_active")}function openDropDown(e,t){e.classList.add("drop-down__list_active"),t.classList.add("drop-down__button_active")}function showLateDelivery(){var e=Date.now();new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),20,50).getTime()<e&&document.querySelector(".late-delivery").classList.remove("display_hide")}function createFullAddress(e){var t="";return e.street&&(t+="Ул. ".concat(e.street)),e.house&&(t+=" дом ".concat(e.house)),e.apartment&&(t+=" кв. ".concat(e.apartment)),e.entrance&&(t+=" подъезд ".concat(e.entrance)),e.floor&&(t+=" этаж ".concat(e.floor)),t}function mappingOrder(e){return'\n    <div>\n        <h4 class="modal__h4">Детали заказа:</h4>\n        <table class="modal__order-details">\n            <tr>\n                <td>\n                Имя: \n                </td>\n                <td>\n                '.concat(e.name,"\n                </td>\n            </tr>\n            <tr>\n                <td>\n                Телефон: \n                </td>\n                <td>\n                ").concat(e.phone,"\n                </td>\n            </tr>\n            <tr>\n                <td>\n                Тип доставки: \n                </td>\n                <td>\n                ").concat(DELIVERY_TYPE[e.deliveryType],"\n                </td>\n            </tr>\n            <tr>\n                <td>\n                Тип оплаты: \n                </td>\n                <td>\n                ").concat(PAYMENT_TYPE[e.paymentType],"\n                </td>\n            </tr>\n            <tr>\n                <td>\n                Количество персон: \n                </td>\n                <td>\n                ").concat(e.personCount,"\n                </td>\n            </tr>\n            <tr>\n                <td>\n                Хотите мы перезвоним: \n                </td>\n                <td>\n                ").concat(CALLBACK[e.callBack],"\n                </td>\n            </tr>\n            ").concat(e.address&&"\n            <tr>\n                <td>\n                Адрес доставки: \n                </td>\n                <td>\n                ".concat(createFullAddress(e.address),"\n                </td>\n            </tr>\n            <tr>\n                <td>\n                Коментарий: \n                </td>\n                <td>\n                ").concat(e.address.comments,"\n                </td>\n            </tr>"),"\n            ").concat(e.chosenRestaurant?"\n            <tr>\n                <td>\n                Выбранный ресторан: \n                </td>\n                <td>\n                ".concat(e.chosenRestaurant,"\n                </td>\n            </tr>"):"","\n            ").concat(e.time?"\n            <tr>\n                <td>\n                Ко времени: \n                </td>\n                <td>\n                ".concat(e.time,"\n                </td>\n            </tr>"):"","\n        </table>\n    </div>\n    ")}addButton.addEventListener("click",function(e){count+=1,personCounter.innerHTML=count,removeButton.removeAttribute("disabled")}),document.querySelector(".drop-down").addEventListener("click",function(e){var t=document.querySelector(".drop-down__list"),n=e.target.closest(".drop-down__button");n?(t.classList.contains("drop-down__list_active")?closeDropDown:openDropDown)(t,n):(n=e.target.closest(".drop-down__list-item"))&&!n.classList.contains("drop-down__list-item_selected")&&(null!=(e=document.querySelector(".drop-down__list-item_selected"))&&e.classList.remove("drop-down__list-item_selected"),n.classList.add("drop-down__list-item_selected"),(e=document.querySelector(".drop-down__button")).querySelector(".drop-down__button-title").innerHTML=n.innerHTML,closeDropDown(t,e))}),document.addEventListener("click",function(e){!document.querySelector(".drop-down__list_active")||e.target.closest(".drop-down")||closeDropDown(document.querySelector(".drop-down__list"),document.querySelector(".drop-down__button"))}),showLateDelivery();var orderPageForm=document.querySelector(".order-page__form");orderPageForm.addEventListener("submit",function(e){e.preventDefault();var t,e=new FormData(orderPageForm);"on"===e.get("consentToProcessingOfPD")&&("pickup"===(t={name:e.get("name"),phone:e.get("phone"),deliveryType:e.get("delivery"),paymentType:e.get("payment"),deliveryTime:e.get("deliveryTime"),personCount:document.querySelector(".person-counter__number").innerHTML,callBack:e.get("callBack")}).deliveryType?t.chosenRestaurant=document.querySelector(".drop-down__button-title").innerHTML:t.address={street:e.get("street"),house:e.get("house"),apartment:e.get("apartment"),entrance:e.get("entrance"),floor:e.get("floor"),comments:e.get("comments")},"inTime"===t.deliveryTime&&(t.time=e.get("time")),(e=document.querySelector(".modal")).querySelector(".modal__caption").innerHTML="Заказ оформлен",e.querySelector(".modal__description").innerHTML=mappingOrder(t),document.querySelector("body").style.overflow="hidden",e.classList.remove("modal_hide"),localStorage.setItem("basket",JSON.stringify([])),localStorage.setItem("addToOrder",JSON.stringify([])))}),document.querySelector(".check__box").addEventListener("change",function(e){var t=document.querySelector(".button.checkout__button");e.currentTarget.checked?t.removeAttribute("disabled"):t.setAttribute("disabled","true")});